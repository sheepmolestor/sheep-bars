/*! sheep-bars 06-03-2017 */
function createBars(){barAmount=randomInt(COLOURS.length-1)+1,colourBars.push({barPosition:1,barColour:Math.floor(Math.random()*COLOURS.length),barBooleans:booleanArray(barAmount,COLOURS.length)})}function colourPulse(){colourPulseSize=.04,barShift()}function colourBarTick(){colourPulseSize>0&&(colourPulseSize-=pulseRecede),colourPulseSize<0&&(colourPulseSize=0)}function barShift(){correct=!0;for(var a=0;a<colourBars.length;a++){if(8==colourBars[a].barPosition){for(var b=0;b<COLOURS.length;b++)colourBars[a].barBooleans[b]!=colourIndices[b]&&(correct=!1);colourBars.splice(a,1),correction()}colourBars[a].barPosition++}}function drawBars(a,b){for(var c=0;c<colourBars.length;c++)for(var d=0;d<colourBars[c].barBooleans.length;d++)b.fillStyle=COLOURS[d],colourBars[c].barBooleans[d]&&b.fillRect(d*(a.width/COLOURS.length),(colourBars[c].barPosition*(BAR_Y/8)-.005-colourPulseSize/2)*a.height,a.width/COLOURS.length,(.01+colourPulseSize)*a.height)}function initControlBar(){for(var a=0;a<COLOURS.length;a++)colourIndices.push(!1);document.onkeydown=function(a){e=a.keyCode,83==e?colourIndices[0]=!0:68==e?colourIndices[1]=!0:74==e?colourIndices[2]=!0:75==e&&(colourIndices[3]=!0)},document.onkeyup=function(a){e=a.keyCode,83==e?colourIndices[0]=!1:68==e?colourIndices[1]=!1:74==e?colourIndices[2]=!1:75==e&&(colourIndices[3]=!1)}}function drawControlBar(a,b){for(var c=0;c<colourIndices.length;c++)b.fillStyle=COLOURS[c],colourIndices[c]&&b.fillRect(c*a.width/COLOURS.length,BAR_Y*a.height,a.width/COLOURS.length,(1-BAR_Y)*a.height)}function correction(){correct||(borderAlpha=1)}function borderTick(){borderAlpha<=0||(borderAlpha-=1/30,borderAlpha<=0&&(borderAlpha=0))}function drawCorrect(a,b){b.fillStyle="#B22222",b.globalAlpha=borderAlpha,b.fillRect(0,0,a.width,a.height),b.globalAlpha=1}function init(){mainTimer=setInterval(tick,20);var a=document.getElementById("barCanvas");a.getContext("2d");resizeCanvas(),initControlBar(),initBar()}function tick(){update(),render()}function update(){barTick(),colourBarTick(),borderTick()}function render(){var a=document.getElementById("barCanvas"),b=a.getContext("2d");b.clearRect(0,0,a.width,a.height),drawControlBar(a,b),drawMainBar(a,b),drawBars(a,b),drawCorrect(a,b)}function initBar(){pulseTimer=setTimeout(pulse,468.75)}function pulse(){pulseSize=.04,colourPulse(),createBars(),pulseTimer=setTimeout(pulse,468.75)}function barTick(){pulseSize>0&&(pulseSize-=pulseRecede),pulseSize<0&&(pulseSize=0)}function drawMainBar(a,b){b.fillStyle="#000000",b.fillRect(0,(BAR_Y-.02-pulseSize/2)*a.height,a.width,(.04+pulseSize)*a.height)}function randomInt(a){return Math.floor(Math.random()*a)}function booleanArray(a,b){var c=b-a;if(!(c<0)){for(var d=[],e=0;e<c;e++)d.push(!1);for(var f=0;f<a;f++)d.splice(randomInt(b),0,!0);return d}}function resizeCanvas(){fitToContainer(document.getElementById("barCanvas"))}function fitToContainer(a){a.style.width="100%",a.style.height="100%",a.width=a.offsetWidth,a.height=a.offsetHeight}var colourBars=[],barJumpFrames=5,barJumpDisplacement=0,colourPulseRecede=.01,COLOUR_BAR_HEIGHT=.01,COLOUR_PULSE_CONSTANT=.04,colourPulseSize=0,BAR_POSITIONS=8,colourIndices=[],correct=!0,CORRECT_BORDER_THICKNESS=.05,BORDER_FADE_FRAMES=30,BORDER_INIT_ALPHA=1,borderAlpha=0,mainTimer=!1,FPS=50,mainInterval=20,bpm=128,pulseInterval=468.75,COLOURS=["red","blue","yellow","green"],pulseSize=0,pulseTimer=!1,pulseRecede=.01,PULSE_CONSTANT=.04,BAR_HEIGHT=.04,BAR_Y=.9;