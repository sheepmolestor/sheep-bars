/*! sheep-bars 06-03-2017 */
function createBars(){barAmount=randomInt(COLOURS.length-1)+1,colourBars.push({barPosition:1,barColour:Math.floor(Math.random()*COLOURS.length),barBooleans:booleanArray(barAmount,COLOURS.length)})}function colourPulse(){colourPulseSize=.04,barShift()}function colourBarTick(){colourPulseSize>0&&(colourPulseSize-=pulseRecede),colourPulseSize<0&&(colourPulseSize=0)}function barShift(){for(var a=[],b=0;b<colourBars.length;b++)colourBars[b].barPosition++,8==colourBars[b].barPosition&&a.push(b);for(var c=a.length-1;c>=0;c--)colourBars.splice(a[c],1)}function drawBars(a,b){for(var c=0;c<colourBars.length;c++)for(var d=0;d<colourBars[c].barBooleans.length;d++)b.fillStyle=COLOURS[d],colourBars[c].barBooleans[d]&&b.fillRect(d*(a.width/COLOURS.length),(colourBars[c].barPosition*(BAR_Y/7)-.005-colourPulseSize/2)*a.height,a.width/COLOURS.length,(.01+colourPulseSize)*a.height)}function clearBars(){for(var a=[],b=0;b<colourBars.length;b++)8==colourBars[b].barPosition&&a.push(b);for(var c=a.length-1;c>=0;c--)colourIndices[colourBars[c].barColour]&&colourBars.splice(a[c],1)}function initControlBar(){document.onkeydown=function(a){83==a.keycode?colourIndex[0]=!0:68==a.keycode?colourIndex[1]=!0:74==a.keycode?colourIndex[2]=!0:75==a.keycode&&(colourIndex[3]=!0)},document.onkeyup=function(a){83==a.keycode?colourIndex[0]=!1:68==a.keycode?colourIndex[1]=!1:74==a.keycode?colourIndex[2]=!1:75==a.keycode&&(colourIndex[3]=!1)}}function init(){mainTimer=setInterval(tick,20);var a=document.getElementById("barCanvas");a.getContext("2d");resizeCanvas(),initBar(),initControlBar()}function tick(){update(),render()}function update(){barTick(),colourBarTick()}function render(){var a=document.getElementById("barCanvas"),b=a.getContext("2d");b.clearRect(0,0,a.width,a.height),drawMainBar(a,b),drawBars(a,b)}function initBar(){pulseTimer=setTimeout(pulse,468.75)}function pulse(){pulseSize=.04,colourPulse(),createBars(),pulseTimer=setTimeout(pulse,468.75)}function barTick(){pulseSize>0&&(pulseSize-=pulseRecede),pulseSize<0&&(pulseSize=0)}function drawMainBar(a,b){b.fillStyle="#000000",b.fillRect(0,(BAR_Y-.02-pulseSize/2)*a.height,a.width,(.04+pulseSize)*a.height)}function randomInt(a){return Math.floor(Math.random()*a)}function booleanArray(a,b){var c=b-a;if(!(c<0)){for(var d=[],e=0;e<c;e++)d.push(0);for(var f=0;f<a;f++)d.splice(randomInt(b),0,1);return d}}function resizeCanvas(){fitToContainer(document.getElementById("barCanvas"))}function fitToContainer(a){a.style.width="100%",a.style.height="100%",a.width=a.offsetWidth,a.height=a.offsetHeight}var colourBars=[],barJumpFrames=5,barJumpDisplacement=0,colourPulseRecede=.01,COLOUR_BAR_HEIGHT=.01,COLOUR_PULSE_CONSTANT=.04,colourPulseSize=0,BAR_POSITIONS=8,colourIndices=[!1,!1,!1,!1],mainTimer=!1,FPS=50,mainInterval=20,bpm=128,pulseInterval=468.75,COLOURS=["red","blue","yellow","green"],pulseSize=0,pulseTimer=!1,pulseRecede=.01,PULSE_CONSTANT=.04,BAR_HEIGHT=.04,BAR_Y=.9;